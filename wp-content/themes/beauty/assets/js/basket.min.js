jQuery(document).ready(function(){function t(){!function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];$("._basketSumm").html(e)}($("._tovarSumm").map(function(){var t=$(this).text();return Number(t)}).get())}$("._tovarPrice").each(function(){var t=$(this).text()*$(this).closest(".tovar__opys").closest(".tovar__block--content").find("._tovarCount").val();$(this).closest(".tovar__opys").closest(".tovar__block--content").find("._tovarSumm").html(t)}),t(),$("._removeBlock").on("click",function(){if(!confirm("Бажаєте видалити дану позицію?"))return!1;$(this).closest(".tovar__block--delete").closest(".tovar__block").remove(),t()}),$(".count__minus").on("click",function(e){e.preventDefault();var r=$(this).closest(".tovar__count").find("._tovarCount"),o=parseInt(r.val())-1;o=o<1?1:o,r.val(o),r.change();var s=$(this).closest(".tovar__count").closest(".tovar__block--content").find("._tovarPrice").text()*$(this).closest(".tovar__count").find("._tovarCount").val().trim();return $(this).closest(".tovar__count").closest(".tovar__block--content").find("._tovarSumm").html(s),t(),!1}),$(".count__plus").on("click",function(e){e.preventDefault();var r=$(this).closest(".tovar__count").find("._tovarCount");r.val(parseInt(r.val())+1),r.change();var o=$(this).closest(".tovar__count").closest(".tovar__block--content").find("._tovarPrice").text()*$(this).closest(".tovar__count").find("._tovarCount").val().trim();return $(this).closest(".tovar__count").closest(".tovar__block--content").find("._tovarSumm").html(o),t(),!1});var e=$("#sendBasket"),r=$("#basketForm").attr("data-action");e.on("click",function(){var t=$("#basketPIB").val().trim(),o=$("#basketPhone").val().trim(),s=$("#basketMail").val().trim(),a=$("#basketAdress").val().trim(),i=$("#basketDostavka :selected").val().trim(),n=$("#basketOplata :selected").val().trim();return t.length<6?($(".error__pib--basket").css({opacity:"1",visibility:"visible"}),!1):o.length<6||!/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/.test(o)?($(".error__pib--basket").removeAttr("style"),$(".error__phone--basket").css({opacity:"1",visibility:"visible"}),!1):/^[a-z0-9_-]+@[a-z0-9-]+\.([a-z]{1,6}\.)?[a-z]{2,6}$/i.test(s)&&""!=s?a.length<6?($(".error__pib--basket").removeAttr("style"),$(".error__phone--basket").removeAttr("style"),$(".error__mail--basket").removeAttr("style"),$(".error__adress--basket").css({opacity:"1",visibility:"visible"}),!1):($(".error__pib--basket").removeAttr("style"),$(".error__phone--basket").removeAttr("style"),$(".error__mail--basket").removeAttr("style"),$(".error__adress--basket").removeAttr("style"),void $.ajax({url:r,type:"POST",cache:!1,data:{action:"sendBasketForm",basketPIB:t,basketPhone:o,basketMail:s,basketAdress:a,basketDostavka:i,basketOplata:n},dataType:"html",beforeSend:function(){e.prop("disabled",!0)},success:function(t){t?$("#basketForm").trigger("reset"):alert("Щось не так ... Спробуйте ще раз!"),alert(t),e.prop("disabled",!1)}})):($(".error__pib--basket").removeAttr("style"),$(".error__phone--basket").removeAttr("style"),$(".error__mail--basket").css({opacity:"1",visibility:"visible"}),!1)})});